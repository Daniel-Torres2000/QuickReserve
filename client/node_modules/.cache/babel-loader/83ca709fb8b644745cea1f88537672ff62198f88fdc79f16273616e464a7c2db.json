{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Daniel Torres\\\\Documents\\\\GitHub\\\\QuickReserve\\\\client\\\\src\\\\context\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  allowedRoles = []\n}) => {\n  _s();\n  const {\n    user,\n    loading\n  } = useAuth();\n  console.log('üõ°Ô∏è ProtectedRoute - Verificando acceso:', {\n    user: user === null || user === void 0 ? void 0 : user.name,\n    userRole: (user === null || user === void 0 ? void 0 : user.role) || (user === null || user === void 0 ? void 0 : user.type),\n    loading,\n    allowedRoles\n  });\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '40px',\n          height: '40px',\n          border: '4px solid #f3f3f3',\n          borderTop: '4px solid #3498db',\n          borderRadius: '50%',\n          animation: 'spin 1s linear infinite'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '15px',\n          color: '#666'\n        },\n        children: \"Verificando permisos...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n        children: `\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    console.log('üö´ No hay usuario autenticado, redirigiendo a login');\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Si no se especifican roles permitidos, cualquier usuario autenticado puede acceder\n  if (allowedRoles.length === 0) {\n    console.log('‚úÖ Acceso permitido - Sin restricciones de rol');\n    return children;\n  }\n\n  // Verificar si el rol del usuario est√° en los roles permitidos\n  const userRole = user.role || user.type;\n  const hasPermission = allowedRoles.includes(userRole);\n  console.log('üîç Verificando permisos:', {\n    userRole,\n    allowedRoles,\n    hasPermission\n  });\n  if (!hasPermission) {\n    console.log('‚ùå Acceso denegado, redirigiendo a dashboard principal');\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/dashboard\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 12\n    }, this);\n  }\n  console.log('‚úÖ Acceso permitido');\n  return children;\n};\n_s(ProtectedRoute, \"EmJkapf7qiLC5Br5eCoEq4veZes=\", false, function () {\n  return [useAuth];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","children","allowedRoles","_s","user","loading","console","log","name","userRole","role","type","style","display","justifyContent","alignItems","height","flexDirection","width","border","borderTop","borderRadius","animation","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","color","to","replace","length","hasPermission","includes","_c","$RefreshReg$"],"sources":["C:/Users/Daniel Torres/Documents/GitHub/QuickReserve/client/src/context/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles = [] }) => {\r\n  const { user, loading } = useAuth();\r\n\r\n  console.log('üõ°Ô∏è ProtectedRoute - Verificando acceso:', {\r\n    user: user?.name,\r\n    userRole: user?.role || user?.type,\r\n    loading,\r\n    allowedRoles\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '100vh',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <div style={{\r\n          width: '40px',\r\n          height: '40px',\r\n          border: '4px solid #f3f3f3',\r\n          borderTop: '4px solid #3498db',\r\n          borderRadius: '50%',\r\n          animation: 'spin 1s linear infinite'\r\n        }}></div>\r\n        <p style={{ marginTop: '15px', color: '#666' }}>\r\n          Verificando permisos...\r\n        </p>\r\n        <style>{`\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    console.log('üö´ No hay usuario autenticado, redirigiendo a login');\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Si no se especifican roles permitidos, cualquier usuario autenticado puede acceder\r\n  if (allowedRoles.length === 0) {\r\n    console.log('‚úÖ Acceso permitido - Sin restricciones de rol');\r\n    return children;\r\n  }\r\n\r\n  // Verificar si el rol del usuario est√° en los roles permitidos\r\n  const userRole = user.role || user.type;\r\n  const hasPermission = allowedRoles.includes(userRole);\r\n\r\n  console.log('üîç Verificando permisos:', {\r\n    userRole,\r\n    allowedRoles,\r\n    hasPermission\r\n  });\r\n\r\n  if (!hasPermission) {\r\n    console.log('‚ùå Acceso denegado, redirigiendo a dashboard principal');\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  console.log('‚úÖ Acceso permitido');\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}